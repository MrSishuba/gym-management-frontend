<app-navbar></app-navbar>
<br>
<br>
<br>
<div class="header-search-container">
    <i class="bi bi-arrow-left-circle header-icon" routerLink="/product-list"></i>
    <h2 class="header-title" routerLink="/product-list">AV MERCH</h2>
</div>
<br>
<br>
<div class="container">
    <h2>Your Cart</h2>
    <div *ngIf="cartItems.length === 0">
        <p>Your cart is empty.</p>
    </div>
    <div *ngIf="cartItems.length > 0" class="row">
      <table class="table">
        <thead class="table-dark">
          <tr>
            <th>Product Image</th>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Total</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody  class="table-body">
          <tr *ngFor="let item of cartItems">
            <td>
              <img [src]="getImageSrc(item.product_Img)" style="width: 100px; height: 100px;">
            </td>
            <td>{{ item.product_Name }}</td>
            <td>
              <span class="increase" style="color:#89cff0">
                  <i class="bi bi-arrow-left-circle-fill" (click)="changeQuantity(item, -1)"></i>
              </span>
              {{ item.quantity }}
              <span class="decrease" style="color:#89cff0">
                  <i class="bi bi-arrow-right-circle-fill" (click)="changeQuantity(item, 1)"></i>
              </span>
            </td>
            <td>{{ item.unit_Price | currency: 'R ' }}</td>
            <td>{{ item.unit_Price * item.quantity | currency: 'R ' }}</td>
            <td>
              <a (click)="removeItem(item.product_ID)">
                <i class="bi bi-x-circle-fill"></i> 
              </a>
            </td>
          </tr>
        </tbody>

        <tfoot class="table-footer">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td><b>Total:</b></td>
                <td>{{ totalAmount | currency: 'R ' }}</td>
                <td></td>
            </tr>
        </tfoot>
      </table>
      <button type="button" class="btn btn-primary" routerLink="/checkout">Checkout</button>
    </div>
  </div>
  